<MainLayout name="bridge.element.01">
  <RequiredInput name="texture" comment="The texture for the bridge element" />
  <RequiredInput name="length" comment="The length of the bridge element" />

  <Variable name="color" value="(1;1;1;1)" />
  <Material id="1" name="input:texture" />
  <Variable name="segmentLen" value="(length-0.2-0.05)/2" />
  <Variable name="angle" value="atan(segmentLen/1.8)" />
  <Variable name="diagLen" value="sqrt((segmentLen / 2)^2 + 0.9^2)" />
  <Variable name="diff" value="((length-0.2-0.05)/2)+0.05" />
  <Variable name="angle2" value="atan(0.5/0.9)" />
  <Variable name="beamLen" value="sqrt(0.9^2 + 0.5^2)" />

  <Layout name="singleRow" pos="0;0;-0.25" type="array" param1="2" variables="0;0;0.5;0;0;0">
  
    <Instruction value="BO:Box:(0;0.05;0);(length;0.1;0.1);1;color" />
    <Instruction value="BO:Box:(0;1.95;0);(length;0.1;0.1);1;color" />
    <Instruction value="BO:Box:(length*0.5 - 0.05;1;0);(0.1;1.8;0.1);1;color" />
    <Instruction value="BO:Box:(length*-0.5 + 0.05;1;0);(0.1;1.8;0.1);1;color" />
    <Instruction value="BO:Box:(0;1;0);(0.05;1.8;0.05);1;color" />

    <Instruction value="BO:Box:(length*0.5 - 0.075;1;0);(0.15;0.3;0.15);1;color" />
    <Instruction value="BO:Box:(length*-0.5 + 0.075;1;0);(0.15;0.3;0.15);1;color" />
    <Instruction value="BO:Box:(0;1;0);(0.1;0.2;0.1);1;color" />

    <Layout name="diagonalThings" pos="-diff / 2;0;0"  type="array" param1="2" variables="diff;0;0;0;0;0">
      <Layout name="diagonal1" pos="segmentLen*0.25;1.45;0" rot="0;0;angle">
        <Instruction value="BO:Box:(0;0;0);(0.02;diagLen;0.05);1;color" />
      </Layout>
      <Layout name="diagonal2" pos="segmentLen*0.25;0.55;0" rot="0;0;-angle">
        <Instruction value="BO:Box:(0;0;0);(0.02;diagLen;0.05);1;color" />
      </Layout>
      <Layout name="diagonal3" pos="segmentLen*-0.25;1.45;0" rot="0;0;-angle">
        <Instruction value="BO:Box:(0;0;0);(0.02;diagLen;0.05);1;color" />
      </Layout>
      <Layout name="diagonal4" pos="segmentLen*-0.25;0.55;0" rot="0;0;angle">
        <Instruction value="BO:Box:(0;0;0);(0.02;diagLen;0.05);1;color" />
      </Layout>
    </Layout>
  </Layout>

  <Layout name="beam1" pos="0;0.55;0" rot="angle2;0;0">
    <Instruction value="BO:Box:(length/2-0.025;0;0);(0.05;beamLen;0.1);1;color" />
    <Instruction value="BO:Box:(length/-2+0.025;0;0);(0.05;beamLen;0.1);1;color" />
  </Layout>
  <Instruction value="BO:Box:(length/2-0.025;1;0);(0.05;0.1;0.5);1;color" />
  <Instruction value="BO:Box:(length/-2+0.025;1;0);(0.05;0.1;0.5);1;color" />

  <Instruction value="BO:Box:(0;0.05;0);(length;0.05;0.5);1;color" />


</MainLayout>