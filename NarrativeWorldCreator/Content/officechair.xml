<MainLayout name="office chair">
  <Variable name="bWheels" value="rand(dice, 0, 1)" />
  <Variable name="podLength" value="rand(const, 0.25, 0.29)" />
  <Variable name="clothTex" value="switch(rand(dice,0,1),0:7,1:8)" />
  <Variable name="podTex" value="4" />
  <Variable name="podTex2" value="3" />
  <Variable name="podHeight" value="rand(const, 0.37,0.44)" />
  <Variable name="seatShape" value="if(rand(dice, 0, 5)==0,0,1)" />
  <Variable name="seatType" value="rand(dice, 0, 1)" />
  <Variable name="seatSize" value="rand(const, 0.35, 0.37)" />
  <Variable name="halfSeatSize" value="seatSize/2" />
  <Variable name="seatHeight" value="0.04" />
  <Variable name="seatHeight2top" value="if(seatType==0,seatHeight*0.75,seatHeight)" />
  <Variable name="seatHeight2bottom" value="if(seatType==0,seatHeight*0.35,0)" />
  <Variable name="backHeight" value="if(seatType==1,rand(const,0.15,0.2),rand(const,0.2,0.3))" />
  <Variable name="backTilt" value="rand(const,PI/8*0.1,PI/8)" />
  <Variable name="nrOfPods" value="if(seatShape==0,rand(dice, 3, 5),rand(dice,4,6))" />
  <Variable name="clothColor" value="switch(rand(dice,0,4),0:(208;64;68),1:(38;153;73),2:(65;84;183),3:(195;175;80),4:(31;126;150))" />
  <Variable name="cColR" value="rand(normal,clothColor[0]/256,0.1)" />
  <Variable name="cColG" value="rand(normal,clothColor[1]/256,0.1)" />
  <Variable name="cColB" value="rand(normal,clothColor[2]/256,0.1)" />

  <Material id="1" file="..\\content\\textures\\wood01.dds" />
  <Material id="2" file="..\\content\\textures\\wood02.dds" />
  <Material id="3" file="..\\content\\textures\\metal01.png" />
  <Material id="4" file="..\\content\\textures\\metal02.png" />
  <Material id="5" file="..\\content\\textures\\wood03.png" />
  <Material id="6" file="..\\content\\textures\\wood04.png" />
  <Material id="7" scale="4">
    <Shader type="Vertex" filename="..\\content\\shaders\\NormalSpecular.vert" />
    <Shader type="Fragment" filename="..\\content\\shaders\\NormalSpecular.frag" />
    <Texture file="..\\content\\textures\\white.jpg" />
    <Texture file="..\\content\\textures\\cloth14n.jpg" />
  </Material>
  <Material id="8" scale="4">
    <Shader type="Vertex" filename="..\\content\\shaders\\NormalSpecular.vert" />
    <Shader type="Fragment" filename="..\\content\\shaders\\NormalSpecular.frag" />
    <Texture file="..\\content\\textures\\white.jpg" />
    <Texture file="..\\content\\textures\\cloth14n.jpg" />
  </Material>


  <Layout name="pod" pos="0;bWheels*0.05;0">
    <Instruction value="BO:Cylinder:0;0;0;0.035;0.03;0.025;8;podTex" />
    <Instruction value="BO:Cylinder:0;0.035;0;podHeight-0.07;0.02;0.02;8;podTex2" />
    <Instruction value="BO:Cylinder:0;podHeight-0.04;0;0.04;0.03;0.05;10;podTex" />
  </Layout>

  <Layout name="seat" pos="0;bWheels*0.05+podHeight;0">
    <Layout name="seatPlastic" type="conditional" condition="seatType==0">
      <Layout name="round" type="conditional" condition="seatShape==0">
        <Instruction value="BO:Cylinder:0;0;0;seatHeight2bottom;halfSeatSize*1.025;halfSeatSize*1.025;32;podTex" />
      </Layout>
      <Layout name="square" type="conditional" condition="seatShape==1">
        <Instruction value="BO:Box:0;seatHeight2bottom/2;0;seatSize*1.025;seatHeight2bottom;seatSize*1.025;podTex" />
      </Layout>
    </Layout>
    <Layout name="seatCloth" pos="0;seatHeight2bottom;0">
      <Layout name="round2" type="conditional" condition="seatShape==0">
        <Instruction value="BO:Cylinder:0;0;0;seatHeight2top;halfSeatSize;halfSeatSize;32;clothTex;cColR;cColG;cColB;1" />
      </Layout>
      <Layout name="square2" type="conditional" condition="seatShape==1">
        <Instruction value="BO:Box:0;seatHeight2top/2;0;seatSize;seatHeight2top;seatSize;clothTex;cColR;cColG;cColB;1" />
      </Layout>
    </Layout>
  </Layout>

  <Layout name="back" type="conditional" pos="0;bWheels*0.05+podHeight;0" condition="seatShape==1">
    <Instruction value="BO:Box:-0.1;-0.015;0;0.1;0.03;0.075;podTex" />
    <Instruction value="BO:Box:-0.15;-0.015;0;halfSeatSize-0.1;0.02;0.07;podTex" />
    <Layout name="backBend" pos="-halfSeatSize;-0.015;0" rot="0;0;PI/8">
      <Instruction value="BO:Box:-0.01;0;0;0.025;0.02;0.07;podTex" />
      <Layout name="backBend2" pos="-0.02;0;0" rot="0;0;PI/8">
        <Instruction value="BO:Box:-0.01;0;0;0.025;0.02;0.07;podTex" />
        <Layout name="backBend3" pos="-0.02;0;0" rot="0;0;PI/8">
          <Instruction value="BO:Box:-0.01;0;0;0.025;0.02;0.07;podTex" />
          <Layout name="backBend4" pos="-0.02;0;0" rot="0;0;backTilt">
            <Instruction value="BO:Box:-0.04;0;0;0.085;0.02;0.07;podTex" />
            <Layout name="backBendStop" pos="-0.08;0;0" rot="0;0;0">
              <Instruction value="BO:Box:-0.05;0;0;0.101;0.03;0.125;podTex" />
              <Instruction value="BO:Cylinder:-0.04;-0.045;0;0.03;0.02;0.02;8;podTex" />
              <Layout name="seatBack" pos="-backHeight/2 - 0.045;0.015;0">
                <Layout name="seatBackPlastic" type="conditional" condition="seatType==0">
                  <Instruction value="BO:Box:0;seatHeight2bottom/2;0;backHeight;seatHeight2bottom;seatSize;podTex" />
                </Layout>
                <Instruction value="BO:Box:0;seatHeight2bottom + seatHeight2top/2;0;backHeight;seatHeight;seatSize;clothTex;cColR;cColG;cColB;1" />
              </Layout>
            </Layout>
          </Layout>
        </Layout>
      </Layout>
    </Layout>
  </Layout>

  <Layout name="pods" type="array" param1="nrOfPods" pos="0;bWheels*0.05;0"  variables="0;0;0;0;(PI*2)/nrOfPods;0">
    <Instruction value="BO:Box:podLength/2;0.01;0;podLength;0.02;0.03;podTex" />
    <Layout name="wheel" type="conditional" condition="bWheels==1" pos="podLength;0;0" rot="PI/2;0;0">
      <Instruction value="BO:Cylinder:0;-0.025;-0.025;0.05;0.025;0.025;8;podTex" />
    </Layout>
  </Layout>
  
</MainLayout>